<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>상품등록</title>
    <th:block th:replace="include/header :: header"></th:block>

</head>

<body>

    <th:block th:replace="include/bodyHead :: bodyHeader"></th:block>
    <div class="main">
        <h2 id="addProduct">상품등록</h2>
        <div class="container my lg" data-v-e2abb636="" data-v-cdf8523a="">
            <th:block th:replace="include/managerMenu :: managerMenu"></th:block>
            <div class="content">
                <form class="form" th:action="@{/products/add}" method="post" th:object="${form}" enctype="multipart/form-data">

                    <div class="inputSection">
                        <div th:if="${#fields.hasGlobalErrors()}">
                            <p class="field-error" th:each="err : ${#fields.globalErrors()}" th:text="${err}">글로벌 오류 메시지</p>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>브랜드</label>
                            </div>
                            <div class="select">
                                <select th:field="*{productBrand}">
                                    <option th:each="brand : ${brands}" th:value="${brand.name}"
                                            th:text="${brand.name}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>카테고리</label>
                            </div>
                            <div class="select">
                                <select th:field="*{productCategory}">
                                    <option th:each="category : ${categories}" th:value="${category.name}"
                                        th:text="${category.name}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>성별</label>
                            </div>
                            <div class="select">
                                <select th:field="*{gender}">
                                    <option value="man">Man</option>
                                    <option value="woman">Woman</option>
                                    <option value="unisex">Unisex</option>
                                </select>
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>상품 이름</label>
                            </div>
                            <div>
                                <input type="text" th:field="*{productName}" placeholder="상품 이름을 입력해주세요"
                                       th:class="${#fields.hasErrors('productName')}? 'form-control fieldError' : 'form-control'">
                                <div class="field-error" th:errors="*{productName}" />
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>색상</label>
                            </div>
                            <div>
                                <input type="text" th:field="*{productColor}" placeholder="색상을 입력해주세요."
                                       th:class="${#fields.hasErrors('productColor')}? 'form-control fieldError' : 'form-control'">
                                <div class="field-error" th:errors="*{productColor}" />
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>사이즈</label>
                            </div>
                            <div>
                                <input type="number" th:field="*{size}" placeholder="size"
                                       th:class="${#fields.hasErrors('size')}? 'form-control fieldError' : 'form-control'">
                                <div class="field-error" th:errors="*{size}" />
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>수량</label>
                            </div>
                            <div>
                                <input type="number" th:field="*{stockQuantity}" placeholder="재고 수량"
                                       th:class="${#fields.hasErrors('stockQuantity')}? 'form-control fieldError' : 'form-control'">
                                <div class="field-error" th:errors="*{stockQuantity}" />
                            </div>
                        </div>
                        <div class="labelSelec">
                            <div class="label">
                                <label>가격</label>
                            </div>
                            <div>
                                <input type="number" th:field="*{price}" placeholder="가격"
                                       th:class="${#fields.hasErrors('price')}? 'form-control fieldError' : 'form-control'">
                                <div class="field-error" th:errors="*{price}" />
                            </div>
                        </div>

                        <div id="addbuttondiv"><button id="addButton" type="submit">등록</button></div>
                    </div>
                    <div class="imgSection">
                        <div class="img">
                            <div><img id="thumbPreview" src="https://3.bp.blogspot.com/-WhBe10rJzG4/U4W-hvWvRCI/AAAAAAAABxg/RyWcixpgr3k/s1600/noimg.jpg" alt="썸네일" style="width: 90%; height: 100%;"></div>
                            <div><input type="file" id="thumbnail" name="img" accept="images/*"></div>
                            <div><input type="file" name="imgs" id="imgs" accept="images/*" multiple></div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
    <th:block th:replace="include/footer :: footer"></th:block>
    <script>
        document.getElementById('thumbnail').addEventListener('change', function (event) {
            const imagePreview = document.getElementById('thumbPreview'); // 'thumbPreview'로 변경
            const selectedFile = event.target.files[0];
            if (selectedFile) {
                const reader = new FileReader();
    
                reader.onload = function (e) {
                    imagePreview.src = e.target.result;
                };
    
                reader.readAsDataURL(selectedFile);
            } else{
                imagePreview.src="";
            }
        });
    </script>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>

</html>